<?php namespace App\Controllers;

use App\Models\InformeModel;
use App\Models\EmpleadosModel;
use CodeIgniter\Controller;

class InformeGastos extends Controller
{
    protected $informeModel;
    protected $empleadoModel;
    protected $session;

    public function __construct()
    {
        $this->informeModel = new InformeModel();
        $this->empleadoModel = new EmpleadosModel();
        $this->session = session();
    }

    // ðŸ  PÃ¡gina principal
    public function index()
{
    $data['informes'] = $this->informeModel
        ->select('informe_gastos.*, empleados.nombre AS emp_nombre, empleados.apellido AS emp_apellido, empleados.departamento AS emp_departamento')
        ->join('empleados', 'empleados.cod_empleado = informe_gastos.cod_empleado', 'left')
        ->findAll();

    $data['empleados'] = $this->empleadoModel->findAll();

    return view('templates/header')
        . view('informe_gastos/index', $data)
        . view('templates/footer');
}

}